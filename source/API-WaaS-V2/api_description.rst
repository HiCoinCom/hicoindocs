1 前期准备
====================

1.1 开发须知
-------------------

1）两对公私钥作用
~~~~~~~~~~~~~~~~~~~

第一对公私钥： 开发者在开通资管账号时，需提前生成一对公私钥，其中公钥（rsa_third_pub）提供给平台，私钥自己保管，私钥为第三方应用调用钱包服务的唯一凭证，请勿透露给任何人。第三方在请求钱包服务时，通过私钥来加密请求参数，平台接受到请求时，通过提供的公钥（rsa_third_pub）来解密请求数据。

第二对公私钥： 开发者开通资管账号后，平台会提供钱包公钥（rsa_wallet_pub）给开发者，第三方应用在接受到钱包的响应数据或异步通知时，需要通过公钥来进行解密。

2）为什么需要进行提现二次确认
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

钱包服务接收到第三方应用请求时，为了确认该请求为第三方应用合法请求，会调用第三方提供的接口来确认。该过程在一定程度上也能避免第三方私钥丢失所造成的影响，也为钱包服务的安全性提供了一套有效屏障。



1.2 资管账号准备
-------------------

开发者准备如下信息：1）生成一对公私钥，将公钥提供给平台； 2）第三方应用服务器IP； 3）充值提现回调通知地址；4）提现二次确认地址；5）是否开启自动归集功能，开启后，系统会自动将用户充值资金划转到商户归集账户。联系平台相关人员，提供上述五类信息。平台为您准备资管账号，提供到您这边包括以下信息： 1）商户的唯一标识：app_id；2）钱包公钥：rsa_wallet_pub。


1.3 接口交互过程
-------------------

文档为钱包服务对第三方应用提供的接口。

.. image:: images/apiopen-instructions-v2.png
   :width: 470px
   :height: 153px
   :align: center

以下文档中的接口提供方称为 **钱包服务**，接口调用方称为 **第三方应用**。第三方应用在请求钱包服务时，通过RSA算法对请求参数进行加密，接受到钱包服务的响应数据后需要进行解密



1.4 接口规则
--------------
:传输方式: https(测试环境暂时使用 http)
:签名字段: 除了 sign 字段，其他所有必填项都需要参与签名
:响应状态码为: 0,表示处理成功，非 0 表示请求错误或系统异常
:请求地址: 域名+接口地址
:加密算法: 详见附 1
